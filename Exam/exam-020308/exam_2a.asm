		.MODEL SMALL
		.STACK 100h
		.DATA
	SUM DD ?
		.CODE
		.386
		
	_compress PROC NEAR
		PUBLIC _compress 
		PUSH BP
		MOV BP,SP
		PUSH SI
		MOV SUM,0
		MOV SI,[BP+4]
		MOV CX,[BP+6]
		JCXZ END_LOOP1
START_LOOP1:
		MOV EAX,[SI]
		ADD SUM,EAX 
		ADD SI,4 
		
		LOOP START_LOOP1 
END_LOOP1:
		MOV AX,WORD PTR [SUM+2] 
		MOV DX,0
		DIV WORD PTR [BP+6] 
		MOV  WORD PTR [SUM+2],AX 
		MOV AX, WORD PTR SUM 
		DIV WORD PTR [BP+6]
		MOV WORD PTR SUM,AX 
		
		MOV BX,[BP+10] 
		MOV SI,[BP+4]
		MOV CX,[BP+6] 
		JCXZ END_LOOP2
START_LOOP2:
		MOV EAX,[SI]
		SUB EAX,SUM 
		MOV [BX],AL 
		ADD SI,4 
		INC BX 
		
		LOOP START_LOOP2
END_LOOP2:
		MOV BX,[BP+8]
		MOV EAX,SUM 
		MOV [BX],EAX 
		POP SI 
		POP BP 
		RET 
	_compress ENDP 
		END